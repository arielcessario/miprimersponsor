(function(){var a=document.getElementsByTagName("script");var c=a[a.length-1].src;angular.module("miprimersponsor.resultados",["ngRoute",["administracion/administracion.min.js"]]).controller("ResultadoController",b);b.$inject=["AppService","DonationService","ProyectService","$location","AdministracionService","$interval","$routeParams","$timeout"];function b(g,f,l,h,i,k,m,e){var d=this;d.proyectos=[];d.type=g.type;d.value="";document.getElementById("resultados-search-box").focus();d.filtrar=n;g.listenCategoria(function(){l.getByParams("categoria_id",""+g.search,"true",function(o){j(o)})});if(d.type=="c"){l.getByParams("categoria_id",""+g.search,"true",function(o){j(o)})}else{d.value=g.search;l.getByParams("nombre",""+d.value,"false",function(o){j(o)})}function n(){l.get(function(o){l.getByParams("nombre",d.value,"false",function(p){g.search=d.value;j(p)})})}function j(p){for(var o=0;o<p.length;o++){p[o].porc=Math.round(p[o].total_donado*100/p[o].costo_inicial);p[o].faltan=(new Date(new Date(p[o].fecha_fin)-new Date())).getDate()}d.proyectos=p}}})();