(function(){var a=document.getElementsByTagName("script");var c=a[a.length-1].src;angular.module("miprimersponsor.nuevoUsuario",["ngRoute"]).config(["$routeProvider",function(d){}]).controller("NuevoUsuarioController",b);b.$inject=["UserService","AcUtils","UserVars","$location","AppService"];function b(l,h,e,k,i){var f=this;f.showLegales=false;f.usuario={cliente_id:-1,nombre:"",apellido:"",nro_doc:"",telefono:"",password:"",direccion:"",mail:"",rol_id:1,cbu:"",social_login:0};var j=document.getElementById("nombre");if(e.user_social.given_name!==undefined){f.usuario.nombre=e.user_social.given_name;f.usuario.apellido=e.user_social.family_name;f.usuario.mail=e.user_social.email;f.usuario.social_login=(e.user_social.user_id.indexOf("google")>-1)?1:2}f.saveUsuario=d;f.loginFacebook=m;f.loginGoogle=g;function m(){l.loginFacebook(function(n){if(n==-1){k.path("/nuevo_usuario")}else{k.path("/main");i.broadcast()}})}function g(){l.loginGoogle(function(n){if(n==-1){k.path("/nuevo_usuario")}else{k.path("/main");i.broadcast()}})}function d(){l.userExist(f.usuario.mail,function(n){if(n>0){h.showMessage("error","El usuario/mail ya existe")}else{l.create(f.usuario,function(o){if(o>-1){if(f.usuario.social_login!==0){l.loginSocial(f.usuario,e.token_social,function(p){k.path("/main");i.broadcast()})}else{l.login(f.usuario.mail,f.usuario.password,1,function(p){k.path("/main");i.broadcast()})}}})}})}}})();