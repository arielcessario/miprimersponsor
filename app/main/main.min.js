(function(){var a=document.getElementsByTagName("script");var c=a[a.length-1].src;angular.module("miprimersponsor.main",["ngRoute",["administracion/administracion.min.js"]]).controller("MainController",b);b.$inject=["UserService","DonationService","ProyectService","$location","AdministracionService","$interval"];function b(k,g,m,i,j,l){var e=this;e.proyectos=[];e.proyecto={};e.user=k.getFromToken();e.donacion_rapida_valor=10;e.slider_nro=1;e.proyectos_slider=[];e.proyecto_slider_01={};e.proyecto_slider_02={};e.proyecto_slider_03={};e.proyecto_slider_04={};e.proyecto_nuevo_01={};e.proyecto_nuevo_02={};e.proyecto_nuevo_03={};e.proyecto_finalizar_01={};e.proyecto_finalizar_02={};e.proyecto_finalizar_03={};e.goToDetalle=d;e.goToCrear=n;e.donacionRapida=f;m.get(function(o){m.getByParams("en_slider","1","true",function(p){e.proyecto_slider_01=p[0];e.proyecto_slider_02=p[0];e.proyecto_slider_03=p[0];e.proyecto_slider_04=p[0]});o.sort(function(q,p){return new Date(p.fecha_inicio)-new Date(q.fecha_inicio)});e.proyecto_nuevo_01=angular.copy(o[0]);e.proyecto_nuevo_01.porc=Math.round(e.proyecto_nuevo_01.total_donado*100/e.proyecto_nuevo_01.costo_inicial);e.proyecto_nuevo_01.faltan=(new Date(new Date(e.proyecto_nuevo_01.fecha_fin)-new Date())).getDate();e.proyecto_nuevo_02=o[1];e.proyecto_nuevo_02.porc=Math.round(e.proyecto_nuevo_02.total_donado*100/e.proyecto_nuevo_02.costo_inicial);e.proyecto_nuevo_02.faltan=(new Date(new Date(e.proyecto_nuevo_02.fecha_fin)-new Date())).getDate();e.proyecto_nuevo_03=o[2];e.proyecto_nuevo_03.porc=Math.round(e.proyecto_nuevo_03.total_donado*100/e.proyecto_nuevo_03.costo_inicial);e.proyecto_nuevo_03.faltan=(new Date(new Date(e.proyecto_nuevo_03.fecha_fin)-new Date())).getDate();o.sort(function(q,p){return new Date(q.fecha_fin)-new Date(p.fecha_fin)});e.proyecto_finalizar_01=o[0];e.proyecto_finalizar_01.porc=Math.round(e.proyecto_finalizar_01.total_donado*100/e.proyecto_finalizar_01.costo_inicial);e.proyecto_finalizar_01.faltan=(new Date(new Date(e.proyecto_finalizar_01.fecha_fin)-new Date())).getDate();e.proyecto_finalizar_02=o[1];e.proyecto_finalizar_02.porc=Math.round(e.proyecto_finalizar_02.total_donado*100/e.proyecto_finalizar_02.costo_inicial);e.proyecto_finalizar_02.faltan=(new Date(new Date(e.proyecto_finalizar_02.fecha_fin)-new Date())).getDate();e.proyecto_finalizar_03=o[2];e.proyecto_finalizar_03.porc=Math.round(e.proyecto_finalizar_03.total_donado*100/e.proyecto_finalizar_03.costo_inicial);e.proyecto_finalizar_03.faltan=(new Date(new Date(e.proyecto_finalizar_03.fecha_fin)-new Date())).getDate()});l(h,3000);function h(){e.slider_nro=(e.slider_nro==4)?1:e.slider_nro+1}function n(){j.screen="administracion/proyectos.html";i.path("/administracion")}function d(o){i.path("/proyecto/"+o)}function f(p,q){if(!e.user){i.path("/ingreso");return}var o={proyecto_id:q,donador_id:e.user.data.id,valor:p,status:0};g.create(o,function(r){console.log(r)})}}})();