(function(){var a=document.getElementsByTagName("script");var c=a[a.length-1].src;angular.module("miprimersponsor.main",["ngRoute",["administracion/administracion.min.js"]]).controller("MainController",b);b.$inject=["UserService","DonationService","ProyectService","$location","AdministracionService","$interval"];function b(j,f,l,h,i,k){var e=this;e.proyectos=[];e.proyecto={};e.user=j.getFromToken();e.donacion_rapida_valor=10;e.slider_nro=1;e.proyectos_slider=[];e.proyecto_slider_01={};e.proyecto_slider_02={};e.proyecto_slider_03={};e.proyecto_slider_04={};e.proyecto_nuevo_01={};e.proyecto_nuevo_02={};e.proyecto_nuevo_03={};e.proyecto_finalizar_01={};e.proyecto_finalizar_02={};e.proyecto_finalizar_03={};e.goToDetalle=d;e.goToCrear=m;l.get(function(n){l.getByParams("en_slider","1","true",function(o){e.proyecto_slider_01=o[0];e.proyecto_slider_02=o[0];e.proyecto_slider_03=o[0];e.proyecto_slider_04=o[0]});n.sort(function(p,o){return new Date(o.fecha_inicio)-new Date(p.fecha_inicio)});e.proyecto_nuevo_01=angular.copy(n[0]);e.proyecto_nuevo_01.porc=Math.round(e.proyecto_nuevo_01.total_donado*100/e.proyecto_nuevo_01.costo_inicial);e.proyecto_nuevo_01.faltan=(new Date(new Date(e.proyecto_nuevo_01.fecha_fin)-new Date())).getDate();e.proyecto_nuevo_02=n[1];e.proyecto_nuevo_02.porc=Math.round(e.proyecto_nuevo_02.total_donado*100/e.proyecto_nuevo_02.costo_inicial);e.proyecto_nuevo_02.faltan=(new Date(new Date(e.proyecto_nuevo_02.fecha_fin)-new Date())).getDate();e.proyecto_nuevo_03=n[2];e.proyecto_nuevo_03.porc=Math.round(e.proyecto_nuevo_03.total_donado*100/e.proyecto_nuevo_03.costo_inicial);e.proyecto_nuevo_03.faltan=(new Date(new Date(e.proyecto_nuevo_03.fecha_fin)-new Date())).getDate();n.sort(function(p,o){return new Date(p.fecha_fin)-new Date(o.fecha_fin)});e.proyecto_finalizar_01=n[0];e.proyecto_finalizar_01.porc=Math.round(e.proyecto_finalizar_01.total_donado*100/e.proyecto_finalizar_01.costo_inicial);e.proyecto_finalizar_01.faltan=(new Date(new Date(e.proyecto_finalizar_01.fecha_fin)-new Date())).getDate();e.proyecto_finalizar_02=n[1];e.proyecto_finalizar_02.porc=Math.round(e.proyecto_finalizar_02.total_donado*100/e.proyecto_finalizar_02.costo_inicial);e.proyecto_finalizar_02.faltan=(new Date(new Date(e.proyecto_finalizar_02.fecha_fin)-new Date())).getDate();e.proyecto_finalizar_03=n[2];e.proyecto_finalizar_03.porc=Math.round(e.proyecto_finalizar_03.total_donado*100/e.proyecto_finalizar_03.costo_inicial);e.proyecto_finalizar_03.faltan=(new Date(new Date(e.proyecto_finalizar_03.fecha_fin)-new Date())).getDate()});k(g,3000);function g(){e.slider_nro=(e.slider_nro==4)?1:e.slider_nro+1}function m(){i.screen="administracion/proyectos.html";h.path("/administracion")}function d(n){h.path("/proyecto/"+n)}}})();