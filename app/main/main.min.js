(function(){var a=document.getElementsByTagName("script");var c=a[a.length-1].src;angular.module("miprimersponsor.main",["ngRoute",["administracion/administracion.min.js"]]).controller("MainController",b);b.$inject=["UserService","DonationService","ProyectService","$location","AdministracionService","$interval"];function b(i,e,k,g,h,j){var d=this;d.proyectos=[];d.proyecto={};d.user=i.getFromToken();d.donacion_rapida_valor=10;d.slider_nro=1;d.proyectos_slider=[];d.proyecto_slider_01={};d.proyecto_slider_02={};d.proyecto_slider_03={};d.proyecto_slider_04={};d.proyecto_nuevo_01={};d.proyecto_nuevo_02={};d.proyecto_nuevo_03={};d.proyecto_finalizar_01={};d.proyecto_finalizar_02={};d.proyecto_finalizar_03={};d.goToCrear=l;k.get(function(m){k.getByParams("en_slider","1","true",function(n){d.proyecto_slider_01=n[0];d.proyecto_slider_02=n[0];d.proyecto_slider_03=n[0];d.proyecto_slider_04=n[0]});m.sort(function(o,n){return new Date(n.fecha_inicio)-new Date(o.fecha_inicio)});d.proyecto_nuevo_01=angular.copy(m[0]);d.proyecto_nuevo_01.porc=Math.round(d.proyecto_nuevo_01.total_donado*100/d.proyecto_nuevo_01.costo_inicial);d.proyecto_nuevo_01.faltan=(new Date(new Date(d.proyecto_nuevo_01.fecha_fin)-new Date())).getDate();d.proyecto_nuevo_02=m[1];d.proyecto_nuevo_02.porc=Math.round(d.proyecto_nuevo_02.total_donado*100/d.proyecto_nuevo_02.costo_inicial);d.proyecto_nuevo_02.faltan=(new Date(new Date(d.proyecto_nuevo_02.fecha_fin)-new Date())).getDate();d.proyecto_nuevo_03=m[2];d.proyecto_nuevo_03.porc=Math.round(d.proyecto_nuevo_03.total_donado*100/d.proyecto_nuevo_03.costo_inicial);d.proyecto_nuevo_03.faltan=(new Date(new Date(d.proyecto_nuevo_03.fecha_fin)-new Date())).getDate();m.sort(function(o,n){return new Date(o.fecha_fin)-new Date(n.fecha_fin)});d.proyecto_finalizar_01=m[0];d.proyecto_finalizar_01.porc=Math.round(d.proyecto_finalizar_01.total_donado*100/d.proyecto_finalizar_01.costo_inicial);d.proyecto_finalizar_01.faltan=(new Date(new Date(d.proyecto_finalizar_01.fecha_fin)-new Date())).getDate();d.proyecto_finalizar_02=m[1];d.proyecto_finalizar_02.porc=Math.round(d.proyecto_finalizar_02.total_donado*100/d.proyecto_finalizar_02.costo_inicial);d.proyecto_finalizar_02.faltan=(new Date(new Date(d.proyecto_finalizar_02.fecha_fin)-new Date())).getDate();d.proyecto_finalizar_03=m[2];d.proyecto_finalizar_03.porc=Math.round(d.proyecto_finalizar_03.total_donado*100/d.proyecto_finalizar_03.costo_inicial);d.proyecto_finalizar_03.faltan=(new Date(new Date(d.proyecto_finalizar_03.fecha_fin)-new Date())).getDate()});j(f,3000);function f(){d.slider_nro=(d.slider_nro==4)?1:d.slider_nro+1}function l(){h.screen="administracion/proyectos.html";g.path("/administracion")}}})();